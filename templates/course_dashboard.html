{% extends 'base.html' %}
{% block content %}
    <div class="container-fluid">
        <p>
            <small>Data last updated: {{ record.created_at|strftime }}</small>
        </p>
    <table data-toggle="table">
    <thead>
    <tr>
        <th>Name</th>
        <th>Grade</th>
        {% for outcome in outcomes %}
            <th>{{ outcome.title }}</th>
        {% endfor %}
    </tr>
    </thead>
        {% for student in students %}
            <tr>
                <td><a href="{{ url_for('course_detail', course_id=student.course_id, user_id=student.user.id)}}">{{ student.user.name }}</a></td>
                <td>{{ student.grade }}</td>
            {% set student_avgs = outcome_averages[student.user.id] %}
            {% for outcome in outcomes %}
                <td>{{ student_avgs[outcome.id] }}</td>
            {% endfor %}
            </tr>

        {% endfor %}
    </table>


{#        <ul class="nav nav-pills mb-3" id="pills-tab" role="tablist">#}
{#            <li class="nav-item">#}
{#                <a class="nav-link active" id="pills-home-tab"#}
{#                   data-toggle="pill" href="#pills-home" role="tab"#}
{#                   aria-controls="pills-home" aria-selected="true">Gradebook</a>#}
{#            </li>#}
{#            <li class="nav-item">#}
{#                <a class="nav-link" id="pills-profile-tab" data-toggle="pill"#}
{#                   href="#pills-profile" role="tab"#}
{#                   aria-controls="pills-profile"#}
{#                   aria-selected="false">Learning Mastery</a>#}
{#            </li>#}
{##}
{#        </ul>#}
{#        <div id="toolbar">#}
{##}
{#            <button id="button2" class="btn btn-secondary">collapseAllRows#}
{#            </button>#}
{#        </div>#}
{#        <div class="tab-content" id="pills-tabContent">#}
{#            <div class="tab-pane fade show active" id="pills-home"#}
{#                 role="tabpanel" aria-labelledby="pills-home-tab">#}
{#                        <table id="courseTable"></table>#}
{#            </div>#}
{#            <div class="tab-pane fade" id="pills-profile" role="tabpanel"#}
{#                 aria-labelledby="pills-profile-tab">#}
{#                <table id="outcomesTable"></table>#}
{#            </div>#}
{##}
{#        </div>#}


    </div>
    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
    <script>
        var $courseTable = $('#courseTable');
        var $button2 = $('#button2');
        {#$(function () {#}
        {#    var grades = {{ grades_dict|tojson|safe }};#}
        {#    var alignments = {{ alignments|tojson|safe }};#}
        {#    let outcomes = {{ outcomes|tojson|safe }}#}
        {##}
        {#    makeCourseTable(grades, alignments);#}
        {#    makeMasteryTable(grades, alignments, outcomes);#}
        {##}
        {#;#}


    </script>


{% endblock %}